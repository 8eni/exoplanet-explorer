<script>
	var Model = (function(document) {
  'use strict';

  var exports = {};

  // https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers#Example_2_Advanced_passing_JSON_Data_and_creating_a_switching_system
  /*
    QueryableWorker instances methods:
     * sendQuery(queryable function name, argument to pass 1, argument to pass 2, etc. etc): calls a Worker's queryable function
     * postMessage(string or JSON Data): see Worker.prototype.postMessage()
     * terminate(): terminates the Worker
     * addListener(name, function): adds a listener
     * removeListener(name): removes a listener
    QueryableWorker instances properties:
     * defaultListener: the default listener executed only when the Worker calls the postMessage() function directly
  */
  function QueryableWorker (sURL, fDefListener, fOnError) {
    var oInstance = this, oWorker = new Worker(sURL), oListeners = {};
    this.defaultListener = fDefListener || function () {};
    oWorker.onmessage = function (oEvent) {
      if (oEvent.data instanceof Object && oEvent.data.hasOwnProperty("vo42t30") && oEvent.data.hasOwnProperty("rnb93qh")) {
        oListeners[oEvent.data.vo42t30].apply(oInstance, oEvent.data.rnb93qh);
      } else {
        this.defaultListener.call(oInstance, oEvent.data);
      }
    };
    if (fOnError) { oWorker.onerror = fOnError; }
    this.sendQuery = function (/* queryable function name, argument to pass 1, argument to pass 2, etc. etc */) {
      if (arguments.length < 1) { throw new TypeError("QueryableWorker.sendQuery - not enough arguments"); return; }
      oWorker.postMessage({ "bk4e1h0": arguments[0], "ktp3fm1": Array.prototype.slice.call(arguments, 1) });
    };
    this.postMessage = function (vMsg) {
      oWorker.postMessage(vMsg);
    };
    this.terminate = function () {
      oWorker.terminate();
    };
    this.addListener = function (sName, fListener) {
      oListeners[sName] = fListener;
    };
    this.removeListener = function (sName) {
      delete oListeners[sName];
    };
  };

  exports.requests = new QueryableWorker('scripts/worker.js');


  /**
   * Get one planet by querying a specific name. Failed gets return null.
   * @param  {String} name planet's name
   * @return {Object}      planet data
   */
  function getPlanetByName(name) {
    // pass a single string
  };
  exports.getPlanetByName = getPlanetByName;

  /**
   * Get an array of planets by passing an array of names. Failed gets return null.
   * @param  {Array} names Array of string names.
   * @return {Array}       Planet data in the same order as requested.
   */
  function getPlanetsByNames(names) {
    // pass an array of strings
  };
  exports.getPlanetsByNames = getPlanetsByNames;

  /**
   * Deep search. Greedy regexes all properties for matches.
   * @param  {String} payload Regex
   * @return {Array}          Array of planets that match.
   */
  function queryGeneral(payload) {
    
  };
  exports.queryGeneral = queryGeneral;

  /**
   * Given some fields and possible values, find planets that might criteria. Planets will be ordered from most to least relevant.
   * @param  {Object} payload 
   * @return {Array}         Array of planet data.
   */
  function querySpecific(payload) {
    // take an 
  };
  exports.querySpecific = querySpecific;

  window.addEventListener('WebComponentsReady', function() {
    // nothing for now
  });

  return exports;
})(document);

</script>